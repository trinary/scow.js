!function(){function e(){var e=new Worker("js/workers/main.js");return e}function n(e){console.log("Worker event:",e)}function t(e){var n=d3.select(".container"),t=d3.values(e.byId);console.log(t);var r=d3.scale.ordinal(),s=n.selectAll(".node").data(t,function(e){return e.id});r.rangePoints([0,2*Math.PI]).domain(d3.range(t.length)),s.enter().append("circle").classed("node",!0),s.attr({cx:function(e,n){return 200*Math.sin(r(n))},cy:function(e,n){return 200*Math.cos(r(n))},r:20}),s.exit().remove()}{var r={links:[],byId:{}},s=d3.select("body").append("svg");s.append("g").classed("container",!0).attr("transform","translate(400,400)"),d3.scale.category20(),d3.select("#new-worker").on("click",function(){var s=e(),a=(new Date).valueOf(),o=0,l=d3.values(r.byId);for(s.onmessage=n,o=0;o<l.length;o++)r.links.push([a,l[o].id]);r.byId[a]={worker:s,id:a},s.postMessage({command:"set-id",value:a}),t(r)}),d3.select("#reset").on("click",function(){var e;for(e=0;e<d3.values(r.byId).length;e++)d3.values(r.byId)[e].worker.postMessage({command:"terminate"});r.byId={},r.links=[],t(r)})}}(),Array.prototype.remove=function(e,n){var t=this.slice((n||e)+1||this.length);return this.length=0>e?this.length+e:e,this.push.apply(this,t)};